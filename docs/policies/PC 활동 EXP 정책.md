# PC 활동 EXP 정책

## 결론
현재 버전은 개인정보를 수집하지 않는 로컬 집계 방식으로 PC 활동을 EXP에 반영하며, 앱이 백그라운드에 있어도 시간 기반 자동 EXP를 누적한다.  
수동 버튼은 대체 경로가 아니라 별도 보상 버튼(`EXP 획득`)으로 제공하며 5분 쿨다운을 적용한다.

## 수집 원칙
1. 입력 원문(키 입력 텍스트), 클립보드 내용, 문서 제목은 수집하지 않는다.
2. 활동량은 집계 카운터(활성 시간, 입력 이벤트 수)만 저장한다.
3. 데이터는 로컬 저장소에만 보관하고 외부 전송을 하지 않는다.

## 수집 항목
1. 활성 시간(초): 앱 프로세스가 실행 중이고 활동 EXP가 ON이면 집계(포커스/가시성 조건 미사용).
2. 입력 이벤트 수: `keydown`, `mousedown`, `mousemove`, `wheel`, `touchstart` 이벤트 횟수만 집계.
3. 일일 누적 활동 EXP: 당일 자동 환산으로 획득한 EXP 총량.
4. 일일 수동 획득 EXP: `EXP 획득` 버튼으로 획득한 EXP 총량.

## EXP 환산 규칙
1. 샘플링 주기: 5분.
2. 환산식: `floor(activeMinutes * 0.4 + inputEvents / 140)`.
3. 자동 환산 일일 상한: 36 EXP.
4. 수동 획득 보상: 1회 2 EXP, 5분 쿨다운.

## 사용자 제어
1. 활동 EXP On/Off 토글: 자동 집계를 즉시 중단/재개할 수 있다.
2. 활동 EXP 리셋: 활동으로 누적된 EXP를 현재 캐릭터 EXP에서 차감해 초기화한다.
3. `EXP 획득` 버튼: 자동 측정과 별개로 5분마다 수동 보상을 받을 수 있다.
4. 집계 표시: EXP 수치를 클릭하면 입력 이벤트별 횟수와 샘플/일일 누적 집계를 확인할 수 있다.

## 장애/예외 처리
1. 자동 집계는 포커스/가시성 신호에 의존하지 않으므로 백그라운드 상태에서도 동일하게 누적한다.
2. 자동 EXP가 0이면 샘플 시간이 짧거나 입력 이벤트가 적은 상태로 판단하고 UI 집계 정보를 통해 원인을 확인한다.
3. 수동 획득 쿨다운에 걸리면 EXP는 지급하지 않고 남은 시간을 상태 메시지로 표시한다.
4. 날짜가 바뀌면 일일 누적치(자동/수동 획득)를 0으로 초기화한다.

## 밸런스 메모
1. 자동 환산은 장시간 플레이에서도 급격한 성장(단일 일차 성체 도달)을 방지하도록 상한을 둔다.
2. 수동 획득은 클릭 리듬 기반 보조 보상이며 자동 환산과 중복 적용된다.
