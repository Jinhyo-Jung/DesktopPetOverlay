# DesktopPetOverlay 사용 가이드

## 결론
- 메인 캐릭터는 현재 모니터 작업영역(해상도) 안에서 자유롭게 이동할 수 있습니다.
- 메인 캐릭터는 `idle/walk/jump/fall/drag` 상태 전환, 드래그 관성, 착지 연출로 더 자연스럽게 움직입니다.
- 메인 캐릭터는 상태별 다중 프레임 스프라이트 재생(`png + json`)으로 동작합니다.
- `⚙` 설정에서 메인 캐릭터 이동 모드를 `랜덤 이동`/`현재 위치 고정`으로 전환할 수 있습니다.
- `⚙` 설정에서 캐릭터 크기를 `1~10` 단계로 조절할 수 있고, 최대 크기는 기본 대비 `x6.00`입니다.
- 스탯(설정) 패널은 캐릭터 위치와 독립적으로 이동하며, 마지막 위치가 저장되어 다시 열 때 같은 위치에 표시됩니다.
- `⚙` 설정 버튼으로 표시할 모니터를 선택해 캐릭터를 즉시 이동할 수 있습니다.
- 입력 캡처는 캐릭터/패널 실제 상호작용 영역에서만 켜지고, 나머지 투명 영역은 뒤 앱 클릭이 가능합니다.
- 보조 캐릭터 추가/제거 버튼은 기능 확장 전까지 숨김 상태입니다.
- 스탯(배고픔/행복/청결/건강) 감소는 앱 실행 중에만 진행됩니다.

## 기본 조작
1. 메인 캐릭터 클릭
- 설정 UI 열기/닫기

2. 메인 캐릭터 드래그
- 현재 모니터 작업영역 안에서 캐릭터 이동
- 드래그 해제 시 관성(짧은 ease-out) 이동이 적용됩니다.

3. `⋮⋮ 패널 이동` 드래그
- 스탯 패널만 이동(캐릭터 위치는 유지)

4. `ESC`
- 열린 설정 UI 즉시 닫기

5. `Ctrl+Alt+Shift+O`
- 클릭 통과 ON/OFF

## 모니터 설정
1. 설정 열기
- 설정 UI의 `⚙` 버튼 클릭

2. 모니터 선택
- `표시 모니터` 드롭다운에서 모니터 선택
- `모니터 적용` 클릭 시 해당 모니터 작업영역으로 전환

## 캐릭터 설정
1. 크기 조절
- `⚙` → `캐릭터 크기` 슬라이더(1~10)로 즉시 반영됩니다.
- `1`은 기본 배율(`x1.00`), `10`은 최대 배율(`x6.00`)입니다.

2. 이동 모드
- `⚙` → `메인 캐릭터 이동`에서 선택합니다.
- `랜덤 이동`: 자동 걷기/점프/랜덤 행동이 동작합니다.
- `현재 위치 고정`: 자동 랜덤 이동이 멈추고, 현재 위치를 유지합니다(드래그로 수동 재배치 가능).

## 캐릭터 / 패널 이동 범위
1. 캐릭터 이동 범위
- 현재 모니터 해상도(작업영역) 기준으로 제한됩니다.
- 다른 모니터로 옮기려면 `⚙` 설정의 `모니터 적용`을 사용합니다.

2. 스탯 패널 이동 범위
- 오버레이 창 내부에서 이동하며 마지막 위치가 저장됩니다.

## 캐릭터 동작
1. 상태 머신
- `idle/walk/jump/fall/drag` 상태가 물리 이벤트(드래그/중력/착지)에 따라 전환됩니다.

2. 착지 연출
- 화면 하단(작업영역 하단)을 지면으로 간주하며, 착지 시 `fall -> idle` 전환이 1회 실행됩니다.

3. 클릭 경계
- 스프라이트 기반 캐릭터는 PNG 알파(투명도) 기반 클릭 판정을 사용해 투명 영역 오클릭을 줄였습니다.

4. 에셋 파이프라인
- 기본 파이프라인은 `png + json`입니다.
- 기본 설정 파일: `source/pet_sprites/main_cat.json`

## 크기
1. 캐릭터 크기
- 기본 크기 기준은 `88px`이며, 설정 슬라이더로 `x1.00 ~ x6.00`까지 조정할 수 있습니다.

## 문제 해결
1. 메인 캐릭터 드래그 중 사라져 보일 때
- 구버전 저장 좌표 영향일 수 있습니다. 캐릭터를 다시 드래그해 위치를 저장하거나 설정 파일 초기화 후 재실행하세요.

2. 원하는 모니터로 바로 보내고 싶을 때
- `⚙` → 모니터 선택 → `모니터 적용`을 사용하세요.

3. 캐릭터 주변이 아닌데 클릭이 막힌다고 느껴질 때
- 최신 버전은 캐릭터/패널 위에서만 입력을 캡처합니다.
- 여전히 막히면 마우스를 캐릭터 바깥으로 한 번 이동 후 다시 클릭해 입력 캡처 상태를 갱신하세요.

4. 앱을 껐다 켠 뒤 스탯이 갑자기 줄어드는지 확인하고 싶을 때
- 현재 정책은 오프라인 시간 미반영입니다.
- 앱 실행 중 1분 틱 기준으로만 스탯이 감소합니다.
